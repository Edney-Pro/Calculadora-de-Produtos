<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Empr√©stimo Di√°rio - Encomenda Palotina</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.0/font/bootstrap-icons.css">
    <style>
        :root {
            --magalu-blue: #007bff;
            --magalu-dark-blue: #0056b3;
            --magalu-light-blue: #e3f2fd;
            --success: #28a745;
            --warning: #ffc107;
            --light-yellow: #fff3cd;
        }

        * {
            -webkit-tap-highlight-color: transparent;
        }

        body {
            background: linear-gradient(135deg, #f8f9fa, #e9ecef);
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            min-height: 100vh;
            margin: 0;
            padding: 0;
            overflow-x: hidden;
        }

        .calculator-container {
            width: 100%;
            min-height: 100vh;
            background: white;
            margin: 0;
            border-radius: 0;
        }

        .calculator-header {
            background: linear-gradient(135deg, var(--magalu-blue), var(--magalu-dark-blue));
            color: white;
            padding: 1.5rem 1rem;
            text-align: center;
        }

        .section-title {
            color: var(--magalu-blue);
            border-left: 4px solid var(--magalu-blue);
            padding-left: 12px;
            margin-bottom: 1rem;
            font-weight: 600;
        }

        .hidden {
            display: none !important;
        }

        .footer-actions {
            position: fixed;
            bottom: 0;
            left: 0;
            right: 0;
            background: white;
            padding: 1rem;
            border-top: 2px solid #e9ecef;
            box-shadow: 0 -2px 10px rgba(0, 0, 0, 0.1);
        }

        .content-area {
            padding-bottom: 120px;
        }

        .slider-container {
            padding: 0 1rem;
            position: relative;
        }

        .form-control, .btn {
            font-size: 16px !important;
        }

        .btn-whatsapp {
            background: linear-gradient(135deg, #25D366, #128C7E);
            border: none;
            font-weight: 600;
            border-radius: 8px;
            color: white;
        }

        .btn-primary {
            background: var(--magalu-blue);
            border-color: var(--magalu-blue);
            font-weight: 600;
            border-radius: 8px;
        }

        .btn-reset {
            background: #6c757d;
            border-color: #6c757d;
            color: white;
            font-weight: 600;
            border-radius: 8px;
        }

        .summary-section {
            background-color: var(--magalu-light-blue);
            border-radius: 8px;
            padding: 1rem;
            margin-top: 1rem;
        }

        .taxa-info {
            font-size: 0.85rem;
            color: #6c757d;
            margin-top: 0.5rem;
        }

        .alert-section {
            background-color: var(--light-yellow);
            border-radius: 8px;
            padding: 1rem;
            margin-top: 1rem;
            border-left: 4px solid var(--warning);
        }

        .valor-display {
            font-size: 1.8rem;
            font-weight: bold;
            color: var(--success);
            text-align: center;
            margin: 1rem 0;
        }
    </style>
</head>
<body>
    <div class="calculator-container">
        <!-- Header -->
        <div class="calculator-header">
            <h1><i class="bi bi-calendar-day me-2"></i>Empr√©stimo Di√°rio</h1>
            <p style="opacity:0.9;">Simule seu empr√©stimo r√°pido</p>
        </div>

        <!-- Conte√∫do -->
        <div class="content-area p-3">
            <!-- Dados pessoais -->
            <div class="mb-4">
                <h4 class="section-title"><i class="bi bi-person-badge me-2"></i>Dados Pessoais</h4>
                <div class="row g-2">
                    <div class="col-6">
                        <input type="text" class="form-control" id="clientName" placeholder="Nome completo">
                    </div>
                    <div class="col-6">
                        <input type="text" class="form-control" id="clientCPF" placeholder="CPF">
                    </div>
                    <div class="col-6">
                        <input type="text" class="form-control" id="clientBank" placeholder="Banco">
                    </div>
                    <div class="col-6">
                        <input type="text" class="form-control" id="clientPix" placeholder="Chave Pix">
                    </div>
                </div>
            </div>

            <!-- Cliente -->
            <div class="mb-4">
                <h4 class="section-title"><i class="bi bi-person-check me-2"></i>√â cliente?</h4>
                <div class="d-flex flex-wrap">
                    <div class="form-check me-3">
                        <input class="form-check-input" type="radio" name="cliente" id="clienteSim">
                        <label class="form-check-label" for="clienteSim">J√° √© Cliente</label>
                    </div>
                    <div class="form-check me-3">
                        <input class="form-check-input" type="radio" name="cliente" id="clienteNao">
                        <label class="form-check-label" for="clienteNao">N√£o √© Cliente</label>
                    </div>
                </div>

                <div class="mt-2 hidden" id="clienteStatus">
                    <div class="form-check">
                        <input class="form-check-input" type="radio" name="statusCliente" id="parcelasDia">
                        <label class="form-check-label" for="parcelasDia">Com Parcelas em Dia</label>
                    </div>
                    <div class="form-check">
                        <input class="form-check-input" type="radio" name="statusCliente" id="parcelasAtraso">
                        <label class="form-check-label" for="parcelasAtraso">Parcelas em Atraso</label>
                    </div>
                </div>
            </div>

            <!-- Valor do empr√©stimo -->
            <div class="mb-4">
                <h4 class="section-title"><i class="bi bi-cash me-2"></i>Valor do Empr√©stimo</h4>
                <div class="slider-container">
                    <input type="range" class="form-range" id="loanValue" min="100" max="1000" step="50" value="300">
                    <p class="valor-display" id="valorDisplay">R$ 300,00</p>
                </div>
            </div>

            <!-- Dias para pagamento -->
            <div class="mb-4">
                <h4 class="section-title"><i class="bi bi-calendar-day me-2"></i>Dias para Pagamento</h4>
                <div class="slider-container">
                    <input type="range" class="form-range" id="diasPagamento" min="1" max="31" value="15">
                    <div class="d-flex justify-content-between mt-1">
                        <small>1 dia</small>
                        <small>31 dias</small>
                    </div>
                    <p class="text-center mt-2 mb-0"><strong id="diasDisplay">15 dias</strong></p>
                </div>
            </div>

            <!-- Taxas de juros -->
            <div class="alert-section">
                <h5><i class="bi bi-info-circle me-2"></i>Informa√ß√µes sobre o Empr√©stimo Di√°rio</h5>
                <p class="mb-1">Taxa de juros di√°ria: 1.77% ao dia</p>
                <p class="mb-0">Exemplo: Empr√©stimo de R$ 300 por 15 dias = Valor a pagar: R$ 379,65</p>
            </div>

            <!-- Resumo -->
            <div class="summary-section hidden" id="summarySection">
                <h5 class="text-center mb-3"><i class="bi bi-file-text me-2"></i>Resumo do Empr√©stimo</h5>
                <div id="summaryContent"></div>
            </div>
        </div>

        <!-- Footer -->
        <div class="footer-actions">
            <div class="row g-2">
                <div class="col-6">
                    <button class="btn btn-reset w-100" onclick="resetCalculator()">
                        <i class="bi bi-arrow-clockwise me-1"></i>Nova Simula√ß√£o
                    </button>
                </div>
                <div class="col-6">
                    <button class="btn btn-whatsapp w-100" onclick="showSummary()">
                        <i class="bi bi-eye me-1"></i>Ver Resumo
                    </button>
                </div>
                <div class="col-12 mt-2 hidden" id="whatsappButton">
                    <button class="btn btn-whatsapp w-100" onclick="sendWhatsApp()">
                        <i class="bi bi-whatsapp me-1"></i>Enviar WhatsApp
                    </button>
                </div>
            </div>
        </div>
    </div>

    <script>
        // Elementos DOM
        const valorRange = document.getElementById('loanValue');
        const valorDisplay = document.getElementById('valorDisplay');
        const diasRange = document.getElementById('diasPagamento');
        const diasDisplay = document.getElementById('diasDisplay');
        const clienteSimRadio = document.getElementById('clienteSim');
        const clienteNaoRadio = document.getElementById('clienteNao');
        const clienteStatusDiv = document.getElementById('clienteStatus');
        const parcelasAtraso = document.getElementById('parcelasAtraso');

        // Taxa de juros di√°ria (1.77% ao dia)
        const taxaDiaria = 0.0177;

        // Inicializa√ß√£o
        document.addEventListener('DOMContentLoaded', () => {
            atualizarDisplay();
            diasRange.addEventListener('input', atualizarDisplay);
            valorRange.addEventListener('input', atualizarDisplay);
            clienteSimRadio.addEventListener('change', toggleClienteStatus);
            clienteNaoRadio.addEventListener('change', toggleClienteStatus);
        });

        // Alternar status do cliente
        function toggleClienteStatus() {
            if (clienteSimRadio.checked) {
                clienteStatusDiv.classList.remove('hidden');
            } else {
                clienteStatusDiv.classList.add('hidden');
            }
        }

        // Formatar valor em BRL
        function formatBRL(valor) {
            return valor.toLocaleString('pt-BR', { style: 'currency', currency: 'BRL' });
        }

        // Atualizar display
        function atualizarDisplay() {
            // Valor do empr√©stimo
            let valor = Number(valorRange.value);
            valorDisplay.textContent = formatBRL(valor);

            // Dias para pagamento
            const dias = Number(diasRange.value);
            diasDisplay.textContent = `${dias} ${dias === 1 ? 'dia' : 'dias'}`;
        }

        // Calcular valor total a pagar
        function calcularValorTotal() {
            const valor = Number(valorRange.value);
            const dias = Number(diasRange.value);
            
            // C√°lculo: Valor * (1 + taxa)^dias
            const valorTotal = valor * Math.pow(1 + taxaDiaria, dias);
            
            return valorTotal;
        }

        // Resetar calculadora
        function resetCalculator() {
            if (confirm('Deseja iniciar nova simula√ß√£o?')) {
                valorRange.value = 300;
                diasRange.value = 15;
                clienteSimRadio.checked = false;
                clienteNaoRadio.checked = false;
                toggleClienteStatus();
                document.getElementById('clientName').value = '';
                document.getElementById('clientCPF').value = '';
                document.getElementById('clientBank').value = '';
                document.getElementById('clientPix').value = '';
                atualizarDisplay();
                document.getElementById('summarySection').classList.add('hidden');
                document.getElementById('whatsappButton').classList.add('hidden');
            }
        }

        // Mostrar resumo
        function showSummary() {
            const nome = document.getElementById('clientName').value.trim();
            const cpf = document.getElementById('clientCPF').value.trim();
            const banco = document.getElementById('clientBank').value.trim();
            const pix = document.getElementById('clientPix').value.trim();
            const valor = Number(valorRange.value);
            const dias = Number(diasRange.value);
            const valorTotal = calcularValorTotal();

            if (!nome || !cpf || !banco || !pix) {
                alert('Preencha todos os dados pessoais.');
                return;
            }

            let alerta = '';
            if (clienteSimRadio.checked && parcelasAtraso.checked) {
                alerta = '<div class="alert alert-warning mt-2">Aten√ß√£o: o cliente possui parcelas em atraso. H√° alta probabilidade de n√£o aprova√ß√£o at√© a regulariza√ß√£o.</div>';
            }

            document.getElementById('summaryContent').innerHTML = `
                <div><strong>Cliente:</strong> ${nome}</div>
                <div><strong>CPF:</strong> ${cpf}</div>
                <div><strong>Banco:</strong> ${banco}</div>
                <div><strong>Chave PIX:</strong> ${pix}</div>
                <hr>
                <div><strong>Valor do Empr√©stimo:</strong> ${formatBRL(valor)}</div>
                <div><strong>Dias para pagamento:</strong> ${dias} dias</div>
                <div><strong>Valor Total a Pagar:</strong> ${formatBRL(valorTotal)}</div>
                <div class="taxa-info">Taxa de juros di√°ria: 1.77%</div>
                ${alerta}
            `;
            document.getElementById('summarySection').classList.remove('hidden');
            document.getElementById('whatsappButton').classList.remove('hidden');
            document.getElementById('summarySection').scrollIntoView({ behavior: 'smooth' });
        }

        // Enviar WhatsApp
        function sendWhatsApp() {
            const nome = document.getElementById('clientName').value.trim();
            const cpf = document.getElementById('clientCPF').value.trim();
            const banco = document.getElementById('clientBank').value.trim();
            const pix = document.getElementById('clientPix').value.trim();
            const valor = Number(valorRange.value);
            const dias = Number(diasRange.value);
            const valorTotal = calcularValorTotal();

            let alertaMsg = '';
            if (clienteSimRadio.checked && parcelasAtraso.checked) {
                alertaMsg = '‚ö†Ô∏è *ATEN√á√ÉO:* Cliente possui parcelas em atraso. H√° alta probabilidade de n√£o aprova√ß√£o at√© a regulariza√ß√£o.\n\n';
            }

            let message = `*üìÖ EMPR√âSTIMO DI√ÅRIO - ENCOMENDA PALOTINA*\n\n` +
                          `*Dados do Cliente:*\n` +
                          `Nome: ${nome}\n` +
                          `CPF: ${cpf}\n` +
                          `Banco: ${banco}\n` +
                          `Chave PIX: ${pix}\n\n` +
                          `*Detalhes do Empr√©stimo:*\n` +
                          `Valor Solicitado: ${formatBRL(valor)}\n` +
                          `Prazo: ${dias} dias\n` +
                          `Valor Total a Pagar: ${formatBRL(valorTotal)}\n\n` +
                          alertaMsg +
                          `üìû *Encomenda Palotina*\n` +
                          `üíö https://wa.me/554498408460`;

            const encoded = encodeURIComponent(message);
            window.open(`https://wa.me/554498408460?text=${encoded}`, '_blank');
        }
    </script>
</body>
</html>