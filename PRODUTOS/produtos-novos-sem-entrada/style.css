/* --- VARIÁVEIS DE TEMA E GERAIS --- */
:root {
    --bg-primary: #0f172a; --bg-secondary: #1e293b; --bg-card: #334155; --text-primary: #f8fafc; --text-secondary: #cbd5e1;
    --text-muted: #94a3b8; --border-color: #475569; --shadow-color: rgba(0, 0, 0, 0.4); --success: #10b981;
    --warning: #f59e0b; --danger: #ef4444; --accent-color: #60a5fa; --produtos-color: #a78bfa;
}

[data-theme="light"] {
    --bg-primary: #f1f5f9; --bg-secondary: #ffffff; --bg-card: #f8fafc; --text-primary: #1e293b; --text-secondary: #475569;
    --text-muted: #64748b; --border-color: #e2e8f0; --shadow-color: rgba(0, 0, 0, 0.08);
}

/* --- ESTRUTURA BASE --- */
* {-webkit-tap-highlight-color: transparent;box-sizing: border-box;}
body {background-color: var(--bg-primary);font-family: 'Inter', sans-serif;color: var(--text-primary);height: 100vh;margin: 0;padding: 0;overflow: hidden;}
.calculator-container {background: var(--bg-secondary);height: 100vh;display: flex;flex-direction: column;}
.calculator-header {background: linear-gradient(135deg, #2c3e50, #3498db);color: #fff;padding: 1.2rem 1rem;text-align: center;box-shadow: 0 2px 15px var(--shadow-color);flex-shrink: 0;display: flex;justify-content: space-between;align-items: center;}
.header-content {text-align: left;}
.calculator-header h1 {font-weight: 600;margin: 0;font-size: 1.3rem;}
.calculator-header p {margin: 0.3rem 0 0 0;font-size: 0.8rem;opacity: 0.95;}
.content-wrapper {flex: 1;overflow-y: auto;display: flex;flex-direction: column; position: relative;}
.progress-container {padding: 0.8rem 1rem;background: var(--bg-secondary);border-bottom: 1px solid var(--border-color);}
.content-area {flex-grow: 1;overflow-y: auto;padding: 1rem;background: var(--bg-primary); display: flex; flex-direction: column;}
.footer-actions {background: var(--bg-secondary);padding: 0.8rem;border-top: 1px solid var(--border-color);box-shadow: 0 -4px 15px var(--shadow-color);flex-shrink: 0;}

/* --- LAYOUT DAS TELAS (ETAPAS) --- */
.etapa {display: none; flex-direction: column; flex-grow: 1;}
.etapa.active {display: flex;animation: fadeIn 0.5s;}
@keyframes fadeIn {from {opacity: 0;}to {opacity: 1;}}
#tela5 {justify-content: space-around;} /* Novo layout para a tela 5 */

/* --- COMPONENTES GERAIS --- */
.section-title {color: var(--accent-color);border-left: 4px solid var(--accent-color);padding-left: 12px;margin-bottom: 1.2rem;font-weight: 600;font-size: 1.1rem;}
.hidden {display: none !important;}
.btn-home, .btn-voltar, .btn-avancar {color: #fff;border: none;font-weight: 500;border-radius: 12px;padding: 12px 8px;transition: all 0.3s ease;font-size: 0.9rem;box-shadow: 0 2px 6px var(--shadow-color);}
.btn-home {background: #475569;}
.btn-voltar {background: var(--warning);}
.btn-avancar {background: var(--success);}
.btn-whatsapp-final {background: #25D366;color: #fff;border: none;font-weight: 600;border-radius: 12px;width: 100%;padding: 14px;transition: all 0.3s ease;font-size: 1rem;}
.btn-whatsapp-final:hover {background: #1da453;}
.btn-simular-atraso {background: var(--danger); color: #fff; border: none; font-weight: 600; border-radius: 12px; width: 100%; padding: 14px; transition: all 0.3s ease; font-size: 1rem; margin-bottom: 0.75rem;}
.btn-simular-atraso:hover {background: #d73737;}
.slider-container, .dia-pagamento-container {background: var(--bg-secondary);padding: 1.5rem;border-radius: 16px;}
.custom-slider {-webkit-appearance: none;appearance: none;width: 100%;height: 8px;background: var(--border-color);border-radius: 10px;outline: none;margin: 20px 0;}
.custom-slider::-webkit-slider-thumb {-webkit-appearance: none;appearance: none;width: 24px;height: 24px;border-radius: 50%;background: var(--accent-color);border: 4px solid var(--bg-secondary);cursor: pointer;}
.slider-value-display {text-align: center;font-weight: 600;color: var(--accent-color);margin-top: 8px;font-size: 1.1rem;}
.form-control {border-radius: 12px;padding: 12px;border: 2px solid var(--border-color);background: var(--bg-primary);color: var(--text-primary);}
.form-control:focus {border-color: var(--accent-color);background: var(--bg-primary);color: var(--text-primary);box-shadow: none;}
.btn-selection {width: 100%;padding: 14px;margin-bottom: 10px;border: 2px solid var(--border-color);border-radius: 12px;background: var(--bg-card);color: var(--text-primary);font-weight: 500;text-align: left;transition: all 0.2s ease-in-out;}
.btn-selection:hover {border-color: var(--accent-color);}
.btn-selection.active {background: var(--accent-color);color: #fff;border-color: var(--accent-color);font-weight: 600;}
.btn-selection i {margin-right: 12px;}
.progress {height: 8px;border-radius: 10px;background: var(--border-color);}
.progress-bar {background: linear-gradient(135deg, var(--accent-color), #82baff);border-radius: 10px;transition: width 0.5s ease;}

/* --- COMPONENTES ESPECÍFICOS --- */
.btn-selection-date {width: 100%;padding: 10px 5px;border: 2px solid var(--border-color);border-radius: 12px;background: var(--bg-card);color: var(--text-primary);font-weight: 500;text-align: center;transition: all 0.2s ease-in-out;display: flex;flex-direction: column;align-items: center;justify-content: center;font-size: 0.9rem; min-height: 60px;}
.btn-selection-date:hover {border-color: var(--accent-color);}
.btn-selection-date.active {background: var(--accent-color);color: #fff;border-color: var(--accent-color);font-weight: 600;}
.btn-selection-date:disabled {background-color: var(--bg-card); border-color: var(--border-color); opacity: 0.4; cursor: not-allowed;}
.btn-selection-date:disabled:hover {transform: none;}
.date-preview {font-size: 0.75rem;font-weight: 400;color: var(--text-muted);margin-top: 2px;}
.btn-selection-date.active .date-preview {color: #fff;opacity: 0.9;}
.produto-form {background: var(--bg-secondary);border-radius: 12px;padding: 1.5rem;border: 1px solid var(--border-color);}
.produtos-lista-container {flex-grow: 1; display: flex; flex-direction: column; min-height: 150px;}
.produtos-lista {max-height: calc(6 * (35px + 0.5rem)); overflow-y: auto;}
.produto-card {padding: 0.5rem; border-radius: 6px; background: var(--bg-secondary); margin-bottom: 0.5rem;}
.garantia-container {background: var(--bg-secondary); padding: 1rem; border-radius: 16px;}
.btn-garantia {width: 100%; padding: 10px 5px; border: 2px solid var(--border-color); border-radius: 8px; background: var(--bg-card); color: var(--text-primary); font-weight: 500; transition: all 0.2s ease-in-out;}
.btn-garantia.active {background: var(--accent-color);color: #fff;border-color: var(--accent-color);}
.btn-garantia:disabled {opacity: 0.4; cursor: not-allowed;}
.visor-principal {text-align: center;padding: 1.5rem 1rem;border-radius: 16px;border: 1px solid var(--border-color); color: var(--text-primary); background: var(--bg-secondary);}
.visor-principal .valor-display {font-size: 2.2rem;font-weight: 700;}
.visor-principal small {text-transform: uppercase; letter-spacing: 1px; color: var(--text-secondary);}
.visor-principal.valor-parcela {background: linear-gradient(135deg, var(--accent-color), #82baff); color: #fff;}
.visor-principal.valor-parcela small {color: #fff; opacity: 0.9;}
.summary-section {background: var(--bg-secondary);border-radius: 16px;padding: 1.5rem;margin-top: 1rem;border: 1px solid var(--border-color);}
.summary-header {margin-bottom: 1.5rem;}
.summary-block {background: var(--bg-primary);border-radius: 12px;padding: 1.5rem;margin-bottom: 1.5rem;border-left: 4px solid var(--accent-color);}
.summary-block-title {color: var(--text-secondary);margin-bottom: 1rem; font-weight: 600;}
.summary-alert {padding: 0.8rem 1rem;margin-top: 1rem;border-radius: 8px;font-size: 0.85rem;border: 1px solid transparent;text-align: center;}
.summary-alert.alert-success {background-color: rgba(16, 185, 129, 0.1);border-color: var(--success);color: #10b981;}
.summary-alert.alert-warning {background-color: rgba(245, 158, 11, 0.1);border-color: var(--warning);color: #f59e0b;}
.summary-alert.alert-info {background-color: rgba(96, 165, 250, 0.1);border-color: var(--accent-color);color: #60a5fa;}

/* --- MODAIS --- */
.settings-icon {cursor: pointer;font-size: 1.5rem;color: #fff;opacity: 0.8;transition: opacity 0.2s, transform 0.2s;}
.settings-icon:hover {opacity: 1;transform: rotate(45deg);}
.modal-overlay {position: fixed;top: 0;left: 0;width: 100%;height: 100%;background: rgba(0, 0, 0, 0.7);z-index: 1000;display: flex;justify-content: center;align-items: center;backdrop-filter: blur(5px);}
.modal-content {background: var(--bg-secondary);padding: 2rem;border-radius: 16px;width: 90%;max-width: 400px;border: 1px solid var(--border-color);box-shadow: 0 10px 30px rgba(0,0,0,0.3);}
.modal-content.modal-fullscreen {width: 100%; height: 100%; max-width: 100%; border-radius: 0; display: flex; flex-direction: column;}
.modal-fullscreen .modal-header {flex-shrink: 0; text-align: center; border-bottom: 1px solid var(--border-color); padding-bottom: 1rem;}
.modal-fullscreen .modal-body {flex-grow: 1; display: flex; flex-direction: column; justify-content: center;}
.modal-fullscreen .modal-footer {flex-shrink: 0; border-top: 1px solid var(--border-color); padding-top: 1rem;}
.obs-text {font-size: 0.8rem;color: var(--text-secondary);line-height: 1.5;}
.atraso-details span {color: var(--text-secondary);}
.atraso-details hr {margin: 0.5rem 0; border-color: var(--border-color);}