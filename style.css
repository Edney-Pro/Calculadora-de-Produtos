/* Reset e Configurações Gerais */
* {
    margin: 0;
    padding: 0;
    box-sizing: border-box;
}

:root {
    /* Cores base - Tema Escuro */
    --bg-primary: #0f172a;
    --bg-secondary: #1e293b;
    --bg-card: #334155;
    --text-primary: #f8fafc;
    --text-secondary: #cbd5e1;
    --text-muted: #94a3b8;
    --border-color: #475569;
    --shadow-color: rgba(0, 0, 0, 0.4);
    
    /* Cores de destaque para ícones/elementos específicos */
    --accent-color: #60a5fa;

    /* Cores das categorias - Tema Escuro */
    --catalog-color: #60a5fa;
    --compramos-color: #34d399;
    --emprestimos-color: #fbbf24;
    --produtos-color: #a78bfa;
    --moveis-color: #fb7185;
    --veiculos-color: #2dd4bf;
    --eletricos-color: #f59e0b;
    --renegociacao-color: #ec4899;
    --ferramentas-color: #84cc16;
    --avancadas-color: #06b6d4;
    
    /* Espaçamentos e Bordas */
    --spacing-sm: 0.75rem; --spacing-md: 1rem; --spacing-lg: 1.5rem; --spacing-xl: 2rem;
    --border-radius-md: 0.75rem; --border-radius-lg: 1rem;
    
    /* Transições */
    --transition-fast: 0.15s ease-out;
    --transition-normal: 0.3s ease-in-out;
}

/* Tema Claro */
.light-theme {
    --bg-primary: #ffffff; --bg-secondary: #f1f5f9; --bg-card: #e2e8f0;
    --text-primary: #1e293b; --text-secondary: #475569; --text-muted: #64748b;
    --border-color: #cbd5e1; --shadow-color: rgba(0, 0, 0, 0.1);
    --accent-color: #2563eb;
    --catalog-color: #2563eb; --compramos-color: #047857; --emprestimos-color: #d97706;
    --produtos-color: #7c3aed; --moveis-color: #be185d; --veiculos-color: #0f766e;
    --eletricos-color: #c2410c; --renegociacao-color: #be185d; --ferramentas-color: #65a30d;
    --avancadas-color: #0891b2;
}

/* Base */
body {
    font-family: 'Inter', sans-serif;
    background: var(--bg-primary);
    color: var(--text-primary);
    line-height: 1.6;
    min-height: 100vh;
    overflow-x: hidden;
    transition: background var(--transition-normal), color var(--transition-normal);
}

.calculator-container {
    min-height: 100vh;
    max-width: 100vw;
    display: flex;
    flex-direction: column;
}

*:focus-visible { outline: 2px solid var(--accent-color); outline-offset: 2px; border-radius: var(--border-radius-md); }

/* Header e Controles */
.calculator-header, .view-controls {
    padding: var(--spacing-md) var(--spacing-lg);
    background: var(--bg-secondary);
    border-bottom: 1px solid var(--border-color);
}
.calculator-header { position: sticky; top: 0; z-index: 100; backdrop-filter: blur(10px); }
.header-content h1 { font-size: 1.65rem; font-weight: 700; display: flex; align-items: center; gap: var(--spacing-sm); }
.header-content h1 i { color: var(--accent-color); font-size: 1.8rem; }
.header-subtitle { color: var(--text-secondary); font-size: 0.9rem; font-weight: 500; }
.view-controls { display: flex; justify-content: space-between; align-items: center; gap: var(--spacing-md); flex-wrap: wrap; }
.mobile-controls, .control-group { display: flex; align-items: center; gap: var(--spacing-md); }
.control-label { color: var(--text-secondary); font-weight: 500; }
.grid-controls { display: flex; background: var(--bg-card); border-radius: var(--border-radius-md); padding: 2px; }
.btn-grid { background: transparent; border: none; color: var(--text-muted); padding: var(--spacing-sm); border-radius: var(--border-radius-md); cursor: pointer; transition: var(--transition-fast); }
.btn-grid.active { background: var(--bg-primary); color: var(--text-primary); box-shadow: 0 1px 3px var(--shadow-color); }
.btn-grid:hover { color: var(--text-primary); background: var(--border-color); }
.btn-mobile-menu, .btn-theme, .btn-search-mobile { background: var(--bg-card); border: none; color: var(--text-primary); padding: var(--spacing-sm) var(--spacing-md); border-radius: var(--border-radius-md); cursor: pointer; transition: var(--transition-fast); }
.btn-mobile-menu:hover, .btn-theme:hover, .btn-search-mobile:hover { background: var(--border-color); transform: translateY(-1px); }

/* Busca */
.search-container { background: var(--bg-secondary); padding: var(--spacing-md) var(--spacing-lg); border-bottom: 1px solid var(--border-color); }
.search-container.hidden { display: none; }
.search-box { position: relative; display: flex; align-items: center; }
.search-box i { position: absolute; left: var(--spacing-md); color: var(--text-muted); }
.search-box input { width: 100%; padding: var(--spacing-md) var(--spacing-md) var(--spacing-md) 3rem; background: var(--bg-primary); border: 2px solid var(--border-color); border-radius: var(--border-radius-md); color: var(--text-primary); font-size: 1rem; outline: none; transition: var(--transition-fast); }
.search-box input:focus { border-color: var(--accent-color); }
.btn-clear-search { position: absolute; right: var(--spacing-sm); background: transparent; border: none; color: var(--text-muted); cursor: pointer; padding: var(--spacing-sm); transition: var(--transition-fast); }
.btn-clear-search:hover { color: var(--text-primary); background: var(--bg-card); }

/* Menu Mobile / Sidebar Desktop */
.mobile-menu { position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: var(--bg-primary); z-index: 1000; overflow-y: auto; transform: translateX(-100%); transition: transform var(--transition-normal); }
.mobile-menu:not(.hidden) { transform: translateX(0); }
.menu-header { display: flex; justify-content: space-between; align-items: center; padding: var(--spacing-lg); border-bottom: 1px solid var(--border-color); background: var(--bg-secondary); position: sticky; top: 0; z-index: 10; }
.menu-header h3 { font-weight: 600; display: flex; align-items: center; gap: var(--spacing-sm); }
.btn-close-menu { background: var(--bg-card); border: none; color: var(--text-primary); padding: var(--spacing-sm); border-radius: var(--border-radius-md); cursor: pointer; }
.menu-content { padding: var(--spacing-md); display: flex; flex-direction: column; gap: 0.25rem; }
.menu-item { background: transparent; border: 1px solid transparent; color: var(--text-secondary); padding: var(--spacing-md); border-radius: var(--border-radius-md); cursor: pointer; transition: all var(--transition-fast); display: flex; align-items: center; gap: var(--spacing-md); text-align: left; position: relative; font-weight: 500; font-size: 1rem; }
.menu-item::before { content: ''; position: absolute; left: 0; top: 10%; height: 80%; width: 4px; background: var(--accent-color); border-radius: 0 2px 2px 0; transform: scaleY(0); transition: transform var(--transition-fast) ease; }
.menu-item.active::before, .menu-item:hover::before { transform: scaleY(1); }
.menu-item.active { background: var(--bg-card); color: var(--text-primary); }
.menu-item:hover { background: var(--bg-card); color: var(--text-primary); }

/* Conteúdo Principal */
.content-area { flex: 1; padding: var(--spacing-lg); padding-bottom: 8rem; }
.category-section { background: var(--bg-secondary); border-radius: var(--border-radius-lg); margin-bottom: var(--spacing-xl); box-shadow: 0 6px 15px var(--shadow-color); overflow: hidden; border: 1px solid var(--border-color); }
.category-header { padding: var(--spacing-lg); display: flex; align-items: center; justify-content: space-between; gap: var(--spacing-md); background: var(--bg-card); border-bottom: 1px solid var(--border-color); }
.category-title-wrapper { display: flex; align-items: center; gap: var(--spacing-md); flex: 1; }
.category-icon { width: 3rem; height: 3rem; border-radius: var(--border-radius-md); display: flex; align-items: center; justify-content: center; font-size: 1.3rem; color: white; flex-shrink: 0; }
.category-title { font-size: 1.5rem; font-weight: 700; color: var(--text-primary); }
.category-badge { background: var(--bg-primary); color: var(--text-primary); padding: 0.25rem var(--spacing-sm); border-radius: var(--border-radius-md); font-size: 0.875rem; font-weight: 600; flex-shrink: 0; }

/* !--- GRID SYSTEM CORRIGIDO ---! */
.grid-container { display: grid; gap: var(--spacing-md); padding: var(--spacing-lg); }
/* Regras globais baseadas no atributo data-columns */
.grid-container[data-columns="1"] { grid-template-columns: 1fr; }
.grid-container[data-columns="2"] { grid-template-columns: repeat(2, 1fr); }
.grid-container[data-columns="3"] { grid-template-columns: repeat(3, 1fr); }

/* Cards */
.module-card { background: var(--bg-primary); border-radius: var(--border-radius-lg); padding: var(--spacing-lg); transition: all var(--transition-normal); cursor: pointer; display: flex; flex-direction: column; gap: var(--spacing-sm); height: 100%; border: 1px solid var(--border-color); border-top: 4px solid; }
.module-card:hover { transform: translateY(-5px); box-shadow: 0 10px 30px var(--shadow-color); }
.module-icon { width: 4.5rem; height: 4.5rem; border-radius: var(--border-radius-md); display: flex; align-items: center; justify-content: center; font-size: 1.8rem; color: white; transition: all var(--transition-normal); margin: 0 auto var(--spacing-sm) auto; }
.module-card:hover .module-icon { transform: scale(1.08) rotate(2deg); }
.module-name { font-size: 1.25rem; font-weight: 700; color: var(--text-primary); text-align: center; }
.module-description { font-size: 0.9rem; color: var(--text-secondary); line-height: 1.5; text-align: center; flex-grow: 1; }
.btn-module { background: var(--bg-secondary); border: 1px solid var(--border-color); color: var(--text-primary); padding: var(--spacing-sm) var(--spacing-lg); border-radius: var(--border-radius-md); cursor: pointer; transition: all var(--transition-fast); display: flex; align-items: center; justify-content: center; gap: var(--spacing-sm); font-weight: 600; font-size: 0.95rem; margin-top: auto; }
.btn-module:hover { transform: translateY(-2px); box-shadow: 0 4px 15px var(--shadow-color); border-color: var(--accent-color); color: var(--accent-color); }

/* Cores de Ícones e Botões */
.catalog-icon { background: var(--catalog-color); } .btn-module.btn-catalog:hover { background: var(--catalog-color); color: white; border-color: var(--catalog-color); }
.compramos-icon { background: var(--compramos-color); } .btn-module.btn-compramos:hover { background: var(--compramos-color); color: white; border-color: var(--compramos-color); }
.emprestimos-icon { background: var(--emprestimos-color); } .btn-module.btn-emprestimos:hover { background: var(--emprestimos-color); color: white; border-color: var(--emprestimos-color); }
.produtos-icon { background: var(--produtos-color); } .btn-module.btn-primary-module:hover { background: var(--produtos-color); color: white; border-color: var(--produtos-color); }
.moveis-icon { background: var(--moveis-color); } .btn-module.btn-moveis:hover { background: var(--moveis-color); color: white; border-color: var(--moveis-color); }
.veiculos-icon { background: var(--veiculos-color); } .btn-module.btn-veiculos:hover { background: var(--veiculos-color); color: white; border-color: var(--veiculos-color); }
.eletricos-icon { background: var(--eletricos-color); } .btn-module.btn-eletricos:hover { background: var(--eletricos-color); color: white; border-color: var(--eletricos-color); }
.renegociacao-icon { background: var(--renegociacao-color); } .btn-module.btn-renegociacao:hover { background: var(--renegociacao-color); color: white; border-color: var(--renegociacao-color); }
.ferramentas-icon { background: var(--ferramentas-color); } .btn-module.btn-ferramentas:hover { background: var(--ferramentas-color); color: white; border-color: var(--ferramentas-color); }
.avancadas-icon { background: var(--avancadas-color); } .btn-module.btn-avancadas:hover { background: var(--avancadas-color); color: white; border-color: var(--avancadas-color); }

/* Rodapé */
.footer-actions { position: fixed; bottom: 0; left: 0; right: 0; background: var(--bg-secondary); border-top: 1px solid var(--border-color); padding: var(--spacing-sm) var(--spacing-lg); backdrop-filter: blur(10px); z-index: 100; display: flex; justify-content: space-around; align-items: center; gap: var(--spacing-md); }
.footer-link { background: var(--bg-card); color: var(--text-secondary); padding: var(--spacing-sm) var(--spacing-md); border-radius: var(--border-radius-md); text-decoration: none; display: flex; align-items: center; gap: var(--spacing-sm); font-weight: 500; transition: all var(--transition-fast); flex: 1; justify-content: center; }
.footer-link i { font-size: 1.2rem; }
.footer-link:hover { background: var(--bg-primary); color: var(--text-primary); transform: translateY(-2px); }
.footer-link:hover i { color: var(--accent-color); }

/* Utilidades e Animações */
.hidden { display: none !important; }
.fade-out-page { opacity: 0; transition: opacity var(--transition-normal); }
.no-results-message { text-align: center; padding: var(--spacing-xl); color: var(--text-muted); background: var(--bg-secondary); border-radius: var(--border-radius-lg); border: 1px dashed var(--border-color); }
.no-results-message i { font-size: 3rem; margin-bottom: var(--spacing-md); }
.no-results-message h3 { font-size: 1.5rem; font-weight: 600; color: var(--text-primary); }
@keyframes fadeIn { from { opacity: 0; transform: translateY(10px); } to { opacity: 1; transform: translateY(0); } }
.category-section { animation: fadeIn 0.5s ease-out forwards; }

/* Responsividade e Overrides */
@media (max-width: 768px) {
    /* Em tablet, 3 colunas se torna 2 */
    .grid-container[data-columns="3"] { grid-template-columns: repeat(2, 1fr); }
    .category-header { flex-direction: column; align-items: flex-start; }
}

@media (max-width: 480px) {
    /* Em celular, tudo se torna 1 coluna, independente da seleção */
    .grid-container[data-columns="2"], .grid-container[data-columns="3"] { grid-template-columns: 1fr; }
    .footer-link span { display: none; }
    .footer-link { padding: var(--spacing-md); }
}

/* Layout Desktop */
@media (min-width: 1024px) {
    .calculator-container { flex-direction: row; }
    .calculator-header, .view-controls, .search-container, .footer-actions { display: none !important; }
    .mobile-menu { position: static; transform: translateX(0); width: 280px; flex-shrink: 0; height: 100vh; border-right: 1px solid var(--border-color); background: var(--bg-secondary); z-index: 50; padding-top: var(--spacing-xl); }
    .mobile-menu .menu-header { display: block; padding: 0 var(--spacing-lg) var(--spacing-lg); border-bottom: none; background: transparent; position: static; }
    .mobile-menu .menu-header h3 { font-size: 1.8rem; }
    .mobile-menu .menu-header .btn-close-menu { display: none; }
    .menu-item:hover, .menu-item.active { background: var(--bg-primary); color: var(--accent-color); }
    .content-area { flex: 1; padding: var(--spacing-xl); overflow-y: auto; height: 100vh; }
}

/* Scrollbar */
::-webkit-scrollbar { width: 8px; height: 8px; }
::-webkit-scrollbar-track { background: var(--bg-secondary); }
::-webkit-scrollbar-thumb { background: var(--border-color); border-radius: 10px; border: 2px solid var(--bg-secondary); }
::-webkit-scrollbar-thumb:hover { background: var(--accent-color); }
html { scrollbar-color: var(--border-color) var(--bg-secondary); scrollbar-width: thin; }