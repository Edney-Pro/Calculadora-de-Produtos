<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Calculadora de Financiamento</title>
    <link rel="stylesheet" href="style.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">
</head>
<body>
    <div class="app-container" id="app">
        <div class="delivery-banner">
            <i class="fas fa-truck"></i>
            <p><strong>Atenção:</strong> Devido à alta demanda, nosso prazo de entrega é de <strong>30 a 60 dias</strong>.</p>
        </div>

        <!-- Step 1: Dados do Cliente -->
        <section class="screen active" id="screen1">
            <div class="screen-header">
                <h2><i class="fas fa-user"></i> Dados do Cliente</h2>
                <div class="progress">1/5</div>
            </div>
            <div class="form-content">
                <div class="form-group">
                    <label for="clientName">Nome Completo:</label>
                    <input type="text" id="clientName" placeholder="Digite seu nome completo" required>
                </div>
                <div class="form-group">
                    <label for="clientCpf">CPF:</label>
                    <input type="text" id="clientCpf" placeholder="000.000.000-00" maxlength="14" required>
                    <span class="error-message" id="cpfError"></span>
                </div>
            </div>
            <div class="navigation-buttons">
                <button class="btn btn-primary" id="nextBtn1" onclick="nextStep(1 )" disabled>Avançar <i class="fas fa-arrow-right"></i></button>
            </div>
        </section>

        <!-- Step 2: Produtos -->
        <section class="screen" id="screen2">
            <div class="screen-header">
                <h2><i class="fas fa-box"></i> Produtos e Serviços</h2>
                <div class="progress">2/5</div>
            </div>
            <div class="form-content">
                <div class="add-product-section">
                    <div class="form-group">
                        <label for="productName">Produto:</label>
                        <input type="text" id="productName" placeholder="Nome do produto">
                    </div>
                    <div class="form-group">
                        <label for="productValue">Valor (R$):</label>
                        <input type="text" id="productValue" placeholder="0,00" inputmode="decimal">
                    </div>
                    <button class="btn btn-success" onclick="addProduct()">Adicionar Produto <i class="fas fa-plus"></i></button>
                </div>
                <div class="products-list">
                    <h3>Itens Adicionados:</h3>
                    <div id="productsContainer">
                        <p class="no-products">Nenhum produto adicionado</p>
                    </div>
                    <div id="visorTotal" class="visor-total">Total: R$ 0,00</div>
                </div>
                <!-- Seção de Montagem -->
                <div class="assembly-section" id="assemblySection">
                    <button class="btn btn-outline" id="addAssemblyBtn" onclick="toggleAssembly(true)">
                        <i class="fas fa-tools"></i> Adicionar Montagem de Móveis
                    </button>
                    <div class="assembly-details" id="assemblyDetails" style="display: none;">
                        <p>Valor da Montagem (10%): <strong id="assemblyValue">R$ 0,00</strong></p>
                        <div class="assembly-options">
                            <label><input type="radio" name="assemblyOption" value="finance" checked onchange="updateAssemblyChoice()"> Diluir nas parcelas</label>
                            <label><input type="radio" name="assemblyOption" value="cash" onchange="updateAssemblyChoice()"> Pagar à vista</label>
                        </div>
                        <button class="btn btn-danger-outline" onclick="toggleAssembly(false)">
                            <i class="fas fa-times"></i> Remover Montagem
                        </button>
                    </div>
                </div>
            </div>
            <div class="navigation-buttons">
                <button class="btn btn-secondary" onclick="prevStep(2)"><i class="fas fa-arrow-left"></i> Voltar</button>
                <button class="btn btn-primary" id="nextBtn2" onclick="nextStep(2)" disabled>Avançar <i class="fas fa-arrow-right"></i></button>
            </div>
        </section>

        <!-- Step 3: Datas de Cobrança -->
        <section class="screen" id="screen3">
            <div class="screen-header">
                <h2><i class="fas fa-calendar-alt"></i> Data da 1ª Cobrança</h2>
                <div class="progress">3/5</div>
            </div>
            <div class="form-content">
                <p class="instruction">Escolha uma data para o vencimento da primeira parcela (somente dias úteis).</p>
                <div class="date-options" id="dateOptions">
                    <!-- Datas serão geradas aqui -->
                </div>
                <div class="info-card" id="dateInfo" style="display:none;">
                    <h3>Data Selecionada:</h3>
                    <p>Primeira cobrança em: <strong id="selectedDate"></strong></p>
                    <p><span id="daysInfo"></span></p>
                </div>
            </div>
            <div class="navigation-buttons">
                <button class="btn btn-secondary" onclick="prevStep(3)"><i class="fas fa-arrow-left"></i> Voltar</button>
                <button class="btn btn-primary" id="nextBtn3" onclick="nextStep(3)" disabled>Avançar <i class="fas fa-arrow-right"></i></button>
            </div>
        </section>

        <!-- Step 4: Entrada & Parcelas -->
        <section class="screen" id="screen4">
            <div class="screen-header">
                <h2><i class="fas fa-money-bill-wave"></i> Pagamento</h2>
                <div class="progress">4/5</div>
            </div>
            <div class="form-content">
                <div class="entry-options">
                    <div class="option-card" onclick="selectEntryOption('none')">
                        <label><i class="fas fa-times-circle"></i> <span>Sem Entrada</span></label>
                    </div>
                    <div class="option-card" onclick="selectEntryOption('with')">
                        <label><i class="fas fa-check-circle"></i> <span>Com Entrada</span></label>
                    </div>
                </div>
                <div class="form-group" id="entryPercentage" style="display:none;">
                    <label for="entryPercent">Percentual de Entrada (1% a 60%):</label>
                    <input type="number" id="entryPercent" placeholder="Ex: 20" min="1" max="60" inputmode="numeric">
                </div>
                <div class="installments-grid" id="installmentsGrid">
                    <p class="instruction">Selecione uma opção de entrada para ver as parcelas.</p>
                </div>
            </div>
            <div class="navigation-buttons">
                <button class="btn btn-secondary" onclick="prevStep(4)"><i class="fas fa-arrow-left"></i> Voltar</button>
                <button class="btn btn-primary" id="nextBtn4" onclick="nextStep(4)" disabled>Avançar <i class="fas fa-arrow-right"></i></button>
            </div>
        </section>

        <!-- Step 5: Resumo -->
        <section class="screen" id="screen5">
            <div class="screen-header">
                <h2><i class="fas fa-file-invoice"></i> Resumo da Simulação</h2>
                <div class="progress">5/5</div>
            </div>
            <div class="summary-content">
                <div class="summary-group">
                    <h4>Cliente</h4>
                    <p><strong>Nome:</strong> <span id="summaryClientName"></span></p>
                    <p><strong>CPF:</strong> <span id="summaryClientCpf"></span></p>
                </div>
                <div class="summary-group">
                    <h4>Produtos e Serviços</h4>
                    <ul id="summaryProducts"></ul>
                    <p id="summaryAssembly" style="display:none;"></p>
                </div>
                <div class="summary-group">
                    <h4>Plano de Pagamento</h4>
                    <p><strong>Modalidade:</strong> <span id="summaryEntryType"></span></p>
                    <p id="summaryEntryValueLine"><strong>Valor da Entrada:</strong> <span id="summaryEntryValue"></span></p>
                    <p><strong>1ª Parcela:</strong> <span id="summaryFirstInstallmentDate"></span></p>
                    <p><strong>Plano:</strong> <strong id="summaryInstallmentPlan" class="highlight"></strong></p>
                </div>
            </div>
            <div class="navigation-buttons">
                <button class="btn btn-secondary" onclick="prevStep(5)"><i class="fas fa-arrow-left"></i> Voltar</button>
                <button class="btn btn-outline" onclick="resetCalculator()">Nova Simulação</button>
                <button class="btn btn-success" onclick="sendProposal()"><i class="fab fa-whatsapp"></i> Enviar Proposta</button>
            </div>
        </section>
    </div>

    <script src="script.js"></script>
</body>
</html>
